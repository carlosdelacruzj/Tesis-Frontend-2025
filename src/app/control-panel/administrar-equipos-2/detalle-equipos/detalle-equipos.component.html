<div class="dashboard-content detalle-equipos">
  <div class="page-header">
    <button mat-button class="back-button" (click)="volver()">
      <mat-icon>arrow_back</mat-icon>
      Volver al resumen
    </button>

    <div>
      <h1>{{ filtros.tipoNombre || 'Inventario de equipos' }}</h1>
      <p class="detalle-subtitle">
        <span *ngIf="filtros.marcaNombre || filtros.modeloNombre">
          {{ filtros.marcaNombre || 'Todas las marcas' }} ·
          {{ filtros.modeloNombre || 'Todos los modelos' }}
        </span>
        <span *ngIf="!(filtros.marcaNombre || filtros.modeloNombre)">
          Visualiza los equipos registrados para este tipo.
        </span>
      </p>
    </div>
  </div>

  <div class="detalle-status" *ngIf="cargando">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <span>Cargando equipos...</span>
  </div>

  <div class="detalle-status error" *ngIf="error">
    <mat-icon>error_outline</mat-icon>
    <span>No se pudo cargar la información. Intenta nuevamente.</span>
  </div>

  <ng-container *ngIf="!cargando && !error">
    <div class="detalle-resumen">
      <div class="detalle-chip">
        Total registrados: {{ equipos.length }}
      </div>
      <div class="detalle-chip" *ngIf="filtros.tipoNombre">
        Tipo: {{ filtros.tipoNombre }}
      </div>
      <div class="detalle-chip" *ngIf="filtros.marcaNombre">
        Marca: {{ filtros.marcaNombre }}
      </div>
      <div class="detalle-chip" *ngIf="filtros.modeloNombre">
        Modelo: {{ filtros.modeloNombre }}
      </div>
    </div>

    <ng-container *ngIf="equipos.length; else sinEquipos">
      <app-table-base
        [columns]="columnas"
        [data]="equipos"
        [pageSize]="10"
        [pageSizeOptions]="[10, 25, 50]"
        searchPlaceholder="Buscar por serie, marca o modelo"
        [showCreateButton]="false"
        [emptyText]="'No hay equipos registrados con estos filtros.'"
      >
        <ng-template appCell="nombreEstado" let-row>
          <span class="estado-pill">{{ row.nombreEstado }}</span>
        </ng-template>

        <ng-template appCell="fechaIngreso" let-row>
          {{ row.fechaIngreso | date: 'mediumDate' }}
        </ng-template>
      </app-table-base>
    </ng-container>
  </ng-container>

  <ng-template #sinEquipos>
    <div class="empty-state">
      <mat-icon>inventory_2</mat-icon>
      <p>No hay equipos registrados con estos filtros.</p>
    </div>
  </ng-template>
</div>
