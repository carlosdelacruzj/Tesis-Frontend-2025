<div class="dashboard">
  <header class="dashboard-header">
    <div>
      <p class="dashboard-header__eyebrow">{{ dashboardMeta.studioName }}</p>
      <h1>Panel operativo</h1>
      <p class="dashboard-header__description">
        Resumen del desempeño comercial y estado de producción de experiencias audiovisuales.
      </p>
    </div>
    <div class="dashboard-header__meta">
      <span class="dashboard-header__week">{{ dashboardMeta.weekRange }}</span>
      <span class="dashboard-header__update">{{ dashboardMeta.lastUpdate }}</span>
      <button class="btn btn-dark dashboard-header__cta" type="button"
        routerLink="/home/gestionar-cotizaciones/registrar">
        Nueva cotización
      </button>
    </div>
  </header>

  <section class="summary-grid">
    <article class="summary-card" *ngFor="let card of summaryCards" [ngClass]="card.accent">
      <div class="summary-card__top">
        <span class="summary-card__label">{{ card.title }}</span>
        <span class="summary-card__chip">{{ card.period }}</span>
      </div>
      <div class="summary-card__value">{{ card.value }}</div>
      <div class="summary-card__trend" [ngClass]="{
          'is-up': card.trend === 'up',
          'is-down': card.trend === 'down',
          'is-flat': card.trend === 'flat'
        }">
        <span class="summary-card__trend-value">{{ card.change }}</span>
        <span class="summary-card__trend-caption">{{ card.subtitle }}</span>
      </div>
    </article>
  </section>

  <div class="content-grid">
    <div class="content-main">
      <section class="panel">
        <div class="panel__header">
          <h2>Eventos en producción</h2>
          <a class="btn btn-link panel__action" routerLink="agenda-operativa">Ver agenda completa</a>
        </div>
        <div class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Evento</th>
                <th class="d-none d-md-table-cell">Ubicación</th>
                <th class="d-none d-lg-table-cell">Líder de crew</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let event of upcomingEvents">
                <td class="table-date">{{ event.dateLabel }}</td>
                <td>
                  <div class="table-client">{{ event.title }}</div>
                  <div class="table-tags">
                    <span class="tag">{{ event.type }}</span>
                    <span class="table-meta d-lg-none">{{ event.crewLead }}</span>
                  </div>
                  <small class="text-muted d-md-none">{{ event.location }}</small>
                </td>
                <td class="d-none d-md-table-cell">{{ event.location }}</td>
                <td class="d-none d-lg-table-cell">{{ event.crewLead }}</td>
                <td>
                  <span class="status-badge" [ngClass]="event.statusClass">{{ event.status }}</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="panel">
        <div class="panel__header">
          <h2>Estado de proyectos de edición</h2>
          <span class="panel__caption">Seguimiento de post producción y entregables clave</span>
        </div>
        <div class="pipeline-list">
          <div class="pipeline-item" *ngFor="let project of projectPipelines">
            <div class="pipeline-item__header">
              <h3>{{ project.name }}</h3>
              <span class="pipeline-item__due">{{ project.due }}</span>
            </div>
            <div class="pipeline-item__meta">
              <span class="pipeline-item__stage">{{ project.stage }}</span>
              <span class="pipeline-item__owner">{{ project.owner }}</span>
            </div>
            <div class="progress">
              <div class="progress-bar" [style.width.%]="project.progress"></div>
            </div>
            <div class="pipeline-item__progress">{{ project.progress }}% completado</div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel__header">
          <h2>Entregables prioritarios</h2>
          <button class="btn btn-outline-secondary btn-sm" type="button">Ver checklist completo</button>
        </div>
        <ul class="deliverables">
          <li class="deliverable" *ngFor="let deliverable of deliverables">
            <div>
              <h3>{{ deliverable.title }}</h3>
              <span class="deliverable__client">{{ deliverable.client }}</span>
            </div>
            <div class="deliverable__meta">
              <span class="deliverable__status">{{ deliverable.status }}</span>
              <span class="deliverable__owner">{{ deliverable.owner }}</span>
              <span class="deliverable__due">Entrega {{ deliverable.due }}</span>
            </div>
          </li>
        </ul>
      </section>
    </div>

    <aside class="content-sidebar">
      <section class="panel">
        <div class="panel__header">
          <h2>Utilización de equipos</h2>
        </div>
        <ul class="equipment-list">
          <li *ngFor="let equipment of equipmentUtilization">
            <div class="equipment-list__header">
              <h3>{{ equipment.label }}</h3>
              <span class="equipment-list__availability">{{ equipment.availability }}</span>
            </div>
            <span class="equipment-list__detail">{{ equipment.detail }}</span>
            <div class="progress progress--thin">
              <div class="progress-bar" [style.width.%]="equipment.utilization"></div>
            </div>
            <span class="equipment-list__utilization">{{ equipment.utilization }}% en uso</span>
          </li>
        </ul>
      </section>

      <section class="panel">
        <div class="panel__header">
          <h2>Canales de captación</h2>
        </div>
        <ul class="sales-sources">
          <li *ngFor="let source of salesSources" [ngClass]="{
              'is-up': source.trend === 'up',
              'is-down': source.trend === 'down'
            }">
            <div class="sales-sources__channel">{{ source.channel }}</div>
            <div class="sales-sources__meta">
              <span class="sales-sources__value">{{ source.contribution }}</span>
              <span class="sales-sources__note">{{ source.note }}</span>
            </div>
          </li>
        </ul>
      </section>

      <section class="panel">
        <div class="panel__header">
          <h2>Checklist inmediato</h2>
        </div>
        <ul class="checklist">
          <li *ngFor="let task of checklist" [class.is-done]="task.done">
            <span class="checklist__indicator"></span>
            <div>
              <p class="checklist__label">{{ task.label }}</p>
              <span class="checklist__meta">{{ task.owner }} · {{ task.due }}</span>
            </div>
          </li>
        </ul>
      </section>
      <section class="panel">
        <div class="panel__header">
          <h2>Resumen agenda de hoy</h2>
          <a routerLink="agenda-operativa" class="btn btn-outline-primary btn-sm">Abrir agenda</a>
        </div>
        <div class="agenda-snapshot">
          <div class="agenda-snapshot__item" *ngFor="let item of agendaHighlights" [ngClass]="'agenda--' + item.theme">
            <div class="agenda-snapshot__icon">
              <i class="material-icons">{{ item.icon }}</i>
            </div>
            <div>
              <p class="agenda-snapshot__label">{{ item.label }}</p>
              <p class="agenda-snapshot__value">{{ item.value }}</p>
              <p class="agenda-snapshot__detail">{{ item.detail }}</p>
            </div>
          </div>
        </div>
      </section>
    </aside>
  </div>
</div>