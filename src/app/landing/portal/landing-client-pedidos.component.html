<section class="client-portal">
  <div class="client-portal__summary">
    <h2>Hola{{ clienteNombre ? ' ' + clienteNombre : '' }} ðŸ‘‹</h2>
    <p>Consulta el avance y pagos de tus pedidos confirmados.</p>
  </div>
</section>

<section class="client-portal client-portal--cards">
  <div class="section__header">
    <h2>Mis pedidos</h2>
    <p>Detalles de tus pedidos activos y prÃ³ximos eventos.</p>
  </div>

  @if (loading) {
    <div class="client-portal__status">Cargando pedidos...</div>
  }
  @if (!loading && error) {
    <div class="client-portal__status client-portal__status--error">{{ error }}</div>
  }
  @if (!loading && !error && !pedidos.length) {
    <div class="client-portal__status">
      AÃºn no registramos pedidos confirmados para tu cuenta.
    </div>
  }

  @if (!loading && !error && pedidos.length) {
    <div class="client-data-grid">
      @for (pedido of pedidos; track pedido.pedidoId) {
        <article class="client-data-card">
      <header class="client-data-card__header">
        <span class="client-data-card__badge">
          <app-estado-badge [estado]="pedido.estadoPedido || 'Sin estado'"></app-estado-badge>
        </span>
        <h3>{{ pedido.nombrePedido }}</h3>
        @if (pedido.estadoPago) {
          <p>Pago: {{ pedido.estadoPago }}</p>
        }
      </header>
      <dl class="client-data-card__details">
        <div>
          <dt>Creado el</dt>
          <dd>{{ pedido.fechaCreacion | date: 'dd/MM/yyyy' }}</dd>
        </div>
        <div>
          <dt>Primer evento</dt>
          <dd>{{ pedido.primerEventoFecha ? (pedido.primerEventoFecha | date: 'dd/MM/yyyy') : 'Por programar' }}</dd>
        </div>
        <div>
          <dt>Total</dt>
          <dd>{{ pedido.total | usd:'1.2-2' }}</dd>
        </div>
        <div>
          <dt>Saldo pendiente</dt>
          <dd>{{ pedido.saldoPendiente | usd:'1.2-2' }}</dd>
        </div>
      </dl>
          @if (pedido.observaciones) {
            <p class="client-data-card__message">
              {{ pedido.observaciones }}
            </p>
          }
          @if (pedido.empleadoNombre) {
            <p class="client-data-card__footer">
              Ejecutivo a cargo: {{ pedido.empleadoNombre }}
            </p>
          }
        </article>
      }
    </div>
  }
</section>
